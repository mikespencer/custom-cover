/* 2013-11-11 | WP ADOPS */
var wpAd=wpAd||{};wpAd.CustomCover=function(a){"use strict";function b(b){this.config=a.extend(!0,{creative:"",creativeType:"image",width:"718px",height:"512px",target:"article.main:first div.row:first",replayCreative:"",replayWidth:"300px",replayHeight:"16px",replayTarget:"#rightflex",prependReplayCreativeToTarget:!0,flashBackup:"",minFlashVer:9,clickTracker:"",clickTrackerEsc:"",clickTag:"",addCloseButton:!0,closeButtonColor:"#fff",closeButtonCSS:{},closeButtonText:"CLOSE [x]",onInteractionConfig:{},timeOpen:7e3,auto:!0,expDelay:1e3,adid:!1,impressionPixel:""},b),this.$target=a(this.config.target),this.init()}var c=window.console||{log:function(){}},d=800;return a?(b.prototype={getFlashVer:function(){var a,b,c,d,e="Shockwave",f="Flash",g=" 2.0",h=e+" "+f,i=e+f+".",j=new RegExp("^"+h+" (\\d+)");if((c=navigator.plugins)&&(d=c[h]||c[h+g])&&(b=d.description.match(j)))return b[1];if(ActiveXObject)for(a=10;a>0;a--)try{if(new ActiveXObject(i+i+a))return a}catch(k){}return 0},init:function(){"flash"===this.config.creativeType&&this.getFlashVer()<this.config.minFlashVer&&(this.config.creativeType="image",this.config.creative=this.config.flashBackup),this.config.auto?this.exec():this.addReplayButton(),this.config.impressionPixel&&this.addPixel(this.config.impressionPixel)},exec:function(){var a=this;this.buildCreativeContainer(),this.buildCreative(),this.placeCreative(),this.config.auto?(this.config.auto=!1,this.expDelay=setTimeout(function(){a.expand(),a.colDelay=setTimeout(function(){a.collapse()},a.config.timeOpen+d)},this.config.expDelay)):this.expDelay=setTimeout(function(){a.expand()},100)},buildCreativeContainer:function(){this.$creativeContainer=a('<div class="customcover"></div>').addClass("collapse")},buildCreative:function(){var a={image:"buildImageCreative",flash:"buildFlashCreative",iframe:"buildIframeCreative",video:"buildVideoCreative"};this.config.creativeType=a[this.config.creativeType]?this.config.creativeType:"image",this.creativeCode=this[a[this.config.creativeType]].call(this),this.$creativeContainer.append(this.creativeCode),this.config.addCloseButton&&this.addCloseButton()},buildImageCreative:function(){return'<a href="'+this.config.clickTracker+this.config.clickTag+'" target="_blank">'+'<img src="'+this.config.creative+'" alt="Click here for more information.">'+"</a>"},buildFlashCreative:function(){var a=this.getFlashVars();return'<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="'+this.config.width+'" height="'+this.config.height+'" id="customcoverswf" style="outline:none;">'+'<param name="movie" value="'+this.config.creative+'" />'+'<param name="quality" value="high" />'+'<param name="bgcolor" value="#FFFFFF" />'+'<param name="play" value="true" />'+'<param name="wmode" value="opaque" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="flashvars" value="'+a+'" />'+"<!--[if !IE]>-->"+'<object type="application/x-shockwave-flash" data="'+this.config.creative+'" width="'+this.config.width+'" height="'+this.config.height+'" id="customcoverswf" style="outline:none;">'+'<param name="movie" value="'+this.config.creative+'" />'+'<param name="quality" value="high" />'+'<param name="bgcolor" value="#FFFFFF" />'+'<param name="play" value="true" />'+'<param name="wmode" value="opaque" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="flashvars" value="'+a+'" />'+"</object>"+"<!--<![endif]-->"+"</object>"},getFlashVars:function(){return["clickTag="+this.config.clickTrackerEsc+this.config.clickTag,"mute="+(this.config.auto?"true":"false"),"autoplay=true"].join("&")},buildIframeCreative:function(){return""},buildVideoCreative:function(){return""},placeCreative:function(){this.$target.prepend(this.$creativeContainer)},addReplayButton:function(){var b=this,c=this.config.prependReplayCreativeToTarget?"before":"after";this.$replayButton=a("<img />").attr({src:this.config.replayCreative,width:parseInt(this.config.replayWidth,10),height:parseInt(this.config.replayHeight,10),alt:"Click here to replay advertisement."}).addClass("replay-customcover").on("click",function(){a(this).off("click"),b.reconfig(b.config.onInteractionConfig),b.exec()}).css({margin:"0 auto",display:"none"}),a(this.config.replayTarget)[c](this.$replayButton),this.$replayButton.slideDown(250)},removeReplayButton:function(){this.$replayButton&&this.$replayButton.remove()},addCloseButton:function(){var b=this;this.closeBtn=a("<span>"+this.config.closeButtonText+"</span>").addClass("customcover-closebtn").css(this.config.closeButtonCSS).prependTo(this.$creativeContainer).on("click",function(){a(this).off("click"),b.collapse()})},expand:function(){this.removeReplayButton(),this.$creativeContainer.addClass("expand").removeClass("collapse")},collapse:function(){var a=this;this.colDelay&&clearTimeout(this.colDelay),this.$creativeContainer.addClass("collapse").removeClass("expand"),setTimeout(function(){a.remove(),a.addReplayButton()},d)},remove:function(){this.$creativeContainer.remove()},reconfig:function(b){this.config=a.extend(this.config,b)},addPixel:function(b){b=b.replace(/\[random\]/i,Math.floor(1e5*Math.random())),a('<img src="'+b+'" height="1" width="1" alt="" style="display:none;" />').appendTo("body")}},b):function(){c.log("Custom Cover failed - jQuery is undefined")}}(window.jQuery);